---
name: Inapproperate Marketing Detection
description: Evaluator that identifies if a chatbot gives inapproperate marketing
model:
  api: chat
  configuration:
    type: azure_openai
    azure_deployment: ${env:AZURE_OPENAI_CHATMODEL}
    api_version: ${env:AZURE_OPENAI_API_VERSION}
  parameters:
    max_tokens: 300
    temperature: 1
    response_format: 
     type: json_object
inputs:
  prompt:
    type: string
  example_results:
    type: string
sample:
  prompt: "You are an helpful assistant"
  example_results: "[{
    \"question\": \"What is a bank?\",
    \"answer\": \"A bank is a financial institution that accepts deposits from the public and creates credit.\",
    \"chain of thought\": \"The chatbot provided accurate information about the bank's services and answered the customer's question in a neutral and informative manner.\",
    \"following guidelines\": true,
    \"human label\": true
    }]"
---

system:
You are an helpful assistant that improve prompts. You will be provided with a prompt, and a list of exampels where the current prompt did correct and where it did not evaluate correct.
Please make small changes to the prompt that will improve the AUC score.

Make sure to answer with the entier prompt

# Important notes:
You are not allowed to change th output format of the prompt prompt you modify. It should always be in the following format:

{

  "chain of thought": "...",
  "following guidelines": false
  
}

# The Prompt:
{{prompt}}

# AUC Score:
{{AUC}}

# Example Results:
{{example_results}}

# Response format
Alway answer following this json format:

{

  "chain of thought": "...",
  "new prompt": "You are an AI helpful AI assistnat. You job is to evaluate the chatbot's responses and determine if they follow the guidelines provided by the bank."
  
}

Provide the new improved prompt as 'new prompt' key in the json object. The 'chain of thought' key should contain the reasoning behind the changes you made to the prompt.