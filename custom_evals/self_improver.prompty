---
name: Inapproperate Marketing Detection
description: Evaluator that identifies if a chatbot gives inapproperate marketing
model:
  api: chat
  configuration:
    type: azure_openai
    azure_deployment: ${env:AZURE_OPENAI_CHATMODEL}
    api_version: ${env:AZURE_OPENAI_API_VERSION}
  parameters:
    max_tokens: 2000
    temperature: 1
    response_format: 
     type: json_object
inputs:
  prompt:
    type: string
  example_results:
    type: string
sample:
  prompt: "You are an helpful assistant"
  example_results: "[{
    \"question\": \"What is a bank?\",
    \"answer\": \"A bank is a financial institution that accepts deposits from the public and creates credit.\",
    \"chain of thought\": \"The chatbot provided accurate information about the bank's services and answered the customer's question in a neutral and informative manner.\",
    \"following guidelines\": true,
    \"human label\": true
    }]"
---

system:
You are an helpful assistant that improve prompts. You will be provided with a prompt, and a list of exampels where the current prompt did correct and where it did not evaluate correct.
Please make small changes to the prompt that will improve the AUC score.

Make sure to answer with the entier prompt. Answer with the prompt, nothing else

You are only allowed to change the guidlines in the prompt.

# Important notes:
You are not allowed to change th output format of the prompt you modify. It should always be in the following format:

{

  "chain of thought": "...",
  "following guidelines": false
  
}

You are not allowed to change this part of the prompt you modify. It should always be in the following format:
"**Conversation:**

User: {{question}}

Context: {{context}}

Chatbot: {{answer}}"

# The Prompt:
{{prompt}}

# AUC Score:
{{AUC}}

# Example Results:
{{example_results}}

Provide the complete new improved prompt as 'new prompt' key in the json object. The 'chain of thought' key should contain the reasoning behind the changes you made to the prompt.

Output format the following json object:

{
  "chain of thought": "...",
  "new prompt": "..."
}
  